name: Auto-merge Feature â†’ Dev

on:
  pull_request_review:
    types: [submitted]

jobs:
  merge:
    runs-on: ubuntu-latest
    if: >
      github.event.pull_request.base.ref == 'dev' &&
      github.event.review.state == 'approved'
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Merge PR into dev
        uses: peter-evans/create-pull-request@v7
        with:
          token: ${{ secrets.GIT_TOKEN }}
          merge-method: squash
          number: ${{ github.event.pull_request.number }}
          commit-title: "chore: auto-merge feature into dev"
          fail-on-conflict: true
